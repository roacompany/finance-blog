# Technical Development Principles

이 문서는 finance-blog 프로젝트의 기술 개발 원칙을 정의합니다.

## 1. 배포 (Deploy) 정의

**배포(Deploy)란:**
- GitHub Main Branch에 Pull Request를 생성하여 사용자가 직접 클릭/승인할 수 있도록 등록하는 것을 의미합니다.
- AI는 PR을 생성까지만 진행하며, 최종 머지는 **반드시 사용자가 직접 수행**합니다.

### 배포 프로세스
```
1. Feature 브랜치에서 작업 완료 (claude/[feature]-Q7ID3)
2. 모든 변경사항 커밋 및 푸시
3. 로컬 빌드 테스트 (npm run build)
4. GitHub에서 PR 생성 (base: main)
5. 사용자가 PR 검토 및 승인
6. 사용자가 "Merge pull request" 클릭
7. Vercel 자동 프로덕션 배포
```

### 금지사항
- ❌ AI가 임의로 main 브랜치에 머지
- ❌ AI가 임의로 프로덕션 배포
- ❌ 사용자 승인 없이 main 브랜치 변경

---

## 2. 불확실성 처리 원칙

**모르거나 애매한 것은 임의 진행하지 않고 사용자 확인을 받아야 합니다.**

### 확인이 필요한 상황
1. **아키텍처 결정**
   - 새로운 라이브러리/프레임워크 도입
   - 디렉토리 구조 변경
   - 데이터 모델 설계

2. **비즈니스 로직**
   - 계산 공식의 정확성
   - 금융 용어의 정의
   - 사용자 경험(UX) 흐름

3. **배포 및 설정**
   - 환경 변수 설정
   - 빌드 설정 변경
   - CI/CD 파이프라인 수정

4. **데이터 및 콘텐츠**
   - 포스트 내용의 사실 여부
   - 수치 데이터 (가짜 메트릭 금지)
   - SEO 메타데이터

### 확인 절차
```
1. 애매한 상황 인지
2. 가능한 옵션 나열
3. 각 옵션의 장단점 분석
4. 사용자에게 명확한 질문 제시
5. 사용자 결정 대기
6. 승인된 방향으로 진행
```

### 예시
```markdown
# 잘못된 접근
- AI: "새로운 상태 관리를 위해 Zustand를 설치하겠습니다."
  (사용자 확인 없이 진행)

# 올바른 접근
- AI: "상태 관리가 필요합니다. 다음 옵션이 있습니다:
  1. React Context (추가 의존성 없음)
  2. Zustand (경량, 3kb)
  3. Redux (표준, 복잡도 높음)
  어떤 방식을 선호하시나요?"
```

---

## 3. 기존 Principles 존중 원칙

**기존에 확립된 원칙을 무시하지 않고 Merge 합니다.**

### 필수 확인 문서
프로젝트 진행 전 다음 문서를 반드시 확인하고 준수해야 합니다:

1. **ROA_WRITING_PRINCIPLES.md**
   - 정확성 (Accurate): 사실 기반, 출처 명시
   - 간결성 (Concise): 최대 2줄 문장
   - 친근성 (Friendly): 해요체 사용
   - 실용성 (Practical): 실행 가능한 정보
   - 사실성 (Factual): 가짜 데이터 금지

2. **DEPLOYMENT_ERROR_CASES.md**
   - 배포 전 체크리스트
   - 에러 케이스 확인
   - 로컬 빌드 테스트

3. **TOSS_STYLE_TEMPLATES.md**
   - 토스 스타일 글쓰기
   - 3가지 템플릿 활용
   - 즉시적 용어 설명

4. **TECHNICAL_DEVELOPMENT_PRINCIPLES.md** (본 문서)
   - 배포 정의
   - 불확실성 처리
   - 토큰 절약

### Principles 충돌 시
```
1. 기존 원칙 확인
2. 새로운 요구사항과 비교
3. 충돌 지점 파악
4. 사용자에게 충돌 상황 설명
5. 원칙 업데이트 또는 예외 승인 요청
6. 결정 후 진행
```

### 예시
```markdown
# 충돌 상황
- 기존 원칙: "해요체 사용"
- 새 요구사항: "공식 문서는 합니다체로"

# 올바른 처리
- AI: "ROA_WRITING_PRINCIPLES.md에서 '해요체 사용'이 원칙인데,
  공식 문서는 합니다체로 작성하라는 요청이 있습니다.
  다음 중 선택해주세요:
  1. 원칙 수정 (공식 문서 예외 추가)
  2. 공식 문서도 해요체 유지
  3. 공식 문서를 별도 디렉토리로 분리"
```

---

## 4. 토큰 절약 원칙

**의미없는 토큰 낭비를 하지 않습니다.**

### 토큰 낭비 방지 전략

#### 4.1 배포 전 검증 필수
```bash
# 배포 전 로컬에서 확인
npm run build
npm run lint
npm run type-check
```
- **이유:** 배포 실패로 인한 재작업 방지

#### 4.2 에러 발생 시 체계적 접근
```
1. 로컬 빌드로 정확한 에러 확인
2. 에러 메시지 분석
3. DEPLOYMENT_ERROR_CASES.md 참조
4. 수정 및 재빌드
5. 성공 확인 후 커밋
```
- **금지:** 추측으로 여러 번 시도

#### 4.3 파일 읽기 최적화
```
# 잘못된 방법
- 전체 파일을 여러 번 읽기
- 불필요한 파일 탐색

# 올바른 방법
- 필요한 부분만 읽기 (offset, limit 활용)
- Glob/Grep으로 정확한 파일 찾기
- 한 번에 여러 파일 병렬 읽기
```

#### 4.4 중복 작업 방지
```
# 문서화 활용
- DEPLOYMENT_ERROR_CASES.md: 에러 해결 패턴
- ROA_WRITING_PRINCIPLES.md: 글쓰기 원칙
- TOSS_STYLE_TEMPLATES.md: 템플릿

→ 같은 문제를 다시 분석하지 않음
```

#### 4.5 효율적인 코드 탐색
```
# Task 툴 활용
- 복잡한 탐색: Task(subagent_type='Explore')
- 여러 라운드 검색 필요 시: Agent 활용

# Grep/Glob 직접 사용
- 간단한 검색
- 정확한 패턴 매칭
```

### 토큰 낭비 예시

#### ❌ 낭비 케이스
```
1. 배포 전 테스트 없이 푸시 → 빌드 실패 → 재수정 → 재푸시
2. 에러 메시지 확인 없이 추측으로 5번 시도
3. 같은 파일을 3번 연속 읽기
4. 이미 문서화된 에러를 처음부터 다시 분석
```

#### ✅ 효율적인 케이스
```
1. 로컬 빌드 → 에러 확인 → 수정 → 재빌드 성공 → 1회 푸시
2. 에러 메시지 읽기 → DEPLOYMENT_ERROR_CASES.md 확인 → 즉시 수정
3. 필요한 파일만 1번 읽기 (병렬 처리)
4. 기존 문서 참조 → 패턴 적용 → 해결
```

---

## 5. 원칙 준수 체크리스트

모든 작업 전 다음을 확인하세요:

### 작업 시작 전
- [ ] ROA_WRITING_PRINCIPLES.md 확인
- [ ] DEPLOYMENT_ERROR_CASES.md 확인
- [ ] TOSS_STYLE_TEMPLATES.md 확인 (콘텐츠 작업 시)
- [ ] 불확실한 부분 리스트업

### 작업 중
- [ ] 애매한 결정은 사용자 확인
- [ ] 기존 원칙과 충돌 여부 확인
- [ ] 로컬 테스트 진행

### 배포 전
- [ ] npm run build 성공
- [ ] 모든 변경사항 커밋
- [ ] git status clean 확인
- [ ] PR 생성 (main 브랜치 대상)

### 배포 후
- [ ] PR 링크 사용자에게 제공
- [ ] 사용자 머지 대기
- [ ] Vercel 배포 상태 확인 (사용자 요청 시)

---

## 6. 원칙 업데이트

이 문서는 살아있는 문서입니다. 다음 상황에서 업데이트됩니다:

1. **새로운 에러 케이스 발견**
   - DEPLOYMENT_ERROR_CASES.md에 추가
   - 해당 케이스 예방 원칙 추가

2. **워크플로우 개선**
   - 더 효율적인 방법 발견 시
   - 토큰 절약 전략 추가

3. **사용자 요청**
   - 새로운 원칙 추가
   - 기존 원칙 수정/삭제

### 업데이트 절차
```
1. 사용자가 새로운 원칙 제안
2. 기존 원칙과 충돌 여부 확인
3. 원칙 초안 작성
4. 사용자 검토 및 승인
5. 문서 업데이트
6. 커밋 및 푸시
```

---

## 7. 관련 문서

- [ROA_WRITING_PRINCIPLES.md](./ROA_WRITING_PRINCIPLES.md) - 글쓰기 원칙
- [DEPLOYMENT_ERROR_CASES.md](./DEPLOYMENT_ERROR_CASES.md) - 배포 에러 케이스
- [TOSS_STYLE_TEMPLATES.md](./TOSS_STYLE_TEMPLATES.md) - 토스 스타일 템플릿
- [.claude/deployment-workflow.md](./.claude/deployment-workflow.md) - 배포 워크플로우

---

**마지막 업데이트:** 2026-01-12
**버전:** 1.0.0
